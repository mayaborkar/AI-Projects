<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dining Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2rem;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }

        input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
        }

        .toggle-group {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        .toggle-option {
            flex: 1;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .toggle-option.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .toggle-option:hover {
            border-color: #667eea;
        }

        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        button:hover {
            transform: translateY(-2px);
        }

        .result {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9ff;
            border-radius: 15px;
            border-left: 5px solid #667eea;
            display: none;
        }

        .result h2 {
            color: #333;
            margin-bottom: 15px;
        }

        .spending-section {
            margin-bottom: 20px;
        }

        .spending-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .spending-amount {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            text-align: center;
            margin: 10px 0;
        }

        .spending-details {
            color: #666;
            font-size: 0.9rem;
            text-align: center;
            margin-bottom: 15px;
        }

        .details {
            color: #666;
            line-height: 1.6;
        }

        .error {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }

        .divider {
            height: 2px;
            background: linear-gradient(to right, #667eea, #764ba2);
            margin: 20px 0;
            border-radius: 1px;
        }

        @media (max-width: 600px) {
            .container {
                padding: 30px 20px;
            }
            
            h1 {
                font-size: 1.5rem;
            }

            .spending-amount {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dining Calculator</h1>
        
        <form id="calculator-form">
            <div class="form-group">
                <label for="dining-dollars">Dining Dollars Balance ($)</label>
                <input type="number" id="dining-dollars" step="0.01" min="0" placeholder="Enter your dining dollars balance">
                <div class="error" id="dining-dollars-error">Please enter a valid amount</div>
            </div>

            <div class="form-group">
                <label for="meal-swipes">Meal Swipes Remaining</label>
                <input type="number" id="meal-swipes" min="0" placeholder="Enter number of meal swipes remaining">
                <div class="error" id="meal-swipes-error">Please enter a valid number of swipes</div>
            </div>
            
            <div class="form-group">
                <label for="end-date">End Date</label>
                <input type="date" id="end-date">
                <div class="error" id="date-error">Please select a valid future date</div>
            </div>

            <div class="toggle-group">
                <div class="toggle-option active" data-view="daily">Daily View</div>
                <div class="toggle-option" data-view="weekly">Weekly View</div>
            </div>
            
            <button type="submit">Calculate Spending Plan</button>
        </form>
        
        <div class="result" id="result">
            <h2>Your Spending Plan</h2>
            
            <div class="spending-section" id="dining-dollars-section">
                <div class="spending-title">Dining Dollars</div>
                <div class="spending-amount" id="dining-dollars-amount">$0.00</div>
                <div class="spending-details" id="dining-dollars-details"></div>
            </div>

            <div class="divider"></div>

            <div class="spending-section" id="meal-swipes-section">
                <div class="spending-title">Meal Swipes</div>
                <div class="spending-amount" id="meal-swipes-amount">0</div>
                <div class="spending-details" id="meal-swipes-details"></div>
            </div>

            <div class="details" id="overall-details"></div>
        </div>
    </div>

    <script>
        let currentView = 'daily';

        document.querySelectorAll('.toggle-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.toggle-option').forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                currentView = this.dataset.view;
                
                const form = document.getElementById('calculator-form');
                if (form.checkValidity && hasValidInputs()) {
                    calculateSpending();
                }
            });
        });

        document.getElementById('calculator-form').addEventListener('submit', function(e) {
            e.preventDefault();
            calculateSpending();
        });

        function calculateSpending() {
            const diningDollars = parseFloat(document.getElementById('dining-dollars').value) || 0;
            const mealSwipes = parseInt(document.getElementById('meal-swipes').value) || 0;
            const endDate = new Date(document.getElementById('end-date').value);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            clearErrors();
            
            let hasError = false;
            
            if (diningDollars < 0) {
                showError('dining-dollars-error', 'Dining dollars cannot be negative');
                hasError = true;
            }

            if (mealSwipes < 0) {
                showError('meal-swipes-error', 'Meal swipes cannot be negative');
                hasError = true;
            }

            if (diningDollars === 0 && mealSwipes === 0) {
                showError('dining-dollars-error', 'Please enter at least dining dollars or meal swipes');
                hasError = true;
            }
            
            if (!endDate || endDate <= today) {
                showError('date-error', 'Please select a date in the future');
                hasError = true;
            }
            
            if (hasError) {
                document.getElementById('result').style.display = 'none';
                return;
            }
            
            const timeDiff = endDate.getTime() - today.getTime();
            const totalDays = Math.ceil(timeDiff / (1000 * 3600 * 24));
            const totalWeeks = Math.ceil(totalDays / 7);
            
            const periodText = currentView === 'daily' ? 'day' : 'week';
            const periodCount = currentView === 'daily' ? totalDays : totalWeeks;
            
            // Calculate dining dollars
            if (diningDollars > 0) {
                const dollarsPerPeriod = diningDollars / periodCount;
                document.getElementById('dining-dollars-amount').textContent = '$' + dollarsPerPeriod.toFixed(2);
                document.getElementById('dining-dollars-details').textContent = 
                    `$${diningDollars.toFixed(2)} √∑ ${periodCount} ${periodText}${periodCount > 1 ? 's' : ''}`;
                document.getElementById('dining-dollars-section').style.display = 'block';
            } else {
                document.getElementById('dining-dollars-section').style.display = 'none';
            }

            // Calculate meal swipes
            if (mealSwipes > 0) {
                const swipesPerPeriod = mealSwipes / periodCount;
                document.getElementById('meal-swipes-amount').textContent = 
                    swipesPerPeriod >= 1 ? Math.floor(swipesPerPeriod).toString() : swipesPerPeriod.toFixed(1);
                document.getElementById('meal-swipes-details').textContent = 
                    `${mealSwipes} swipes √∑ ${periodCount} ${periodText}${periodCount > 1 ? 's' : ''}`;
                document.getElementById('meal-swipes-section').style.display = 'block';
            } else {
                document.getElementById('meal-swipes-section').style.display = 'none';
            }

            // Overall details
            let detailsText = `You have <strong>${totalDays} days</strong> until ${endDate.toLocaleDateString()}`;
            
            if (currentView === 'weekly') {
                detailsText += ` (approximately <strong>${totalWeeks} weeks</strong>)`;
            }
            
            detailsText += '.<br><br>';
            
            // Tips based on spending
            const dailyDollars = diningDollars / totalDays;
            const dailySwipes = mealSwipes / totalDays;
            
            if (mealSwipes > 0 && diningDollars > 0) {
                if (dailySwipes >= 2 && dailyDollars >= 10) {
                    detailsText += `üéâ <strong>Excellent!</strong> You have plenty of meal swipes and dining dollars. You're all set!`;
                } else if (dailySwipes >= 1 && dailyDollars >= 5) {
                    detailsText += `üëç <strong>Good balance!</strong> You have a nice mix of meal swipes and dining dollars.`;
                } else {
                    detailsText += `üí° <strong>Budget wisely:</strong> Consider using meal swipes for larger meals and dining dollars for snacks.`;
                }
            } else if (mealSwipes > 0) {
                if (dailySwipes >= 2) {
                    detailsText += `üçΩÔ∏è <strong>Great!</strong> You have plenty of meal swipes to cover your meals.`;
                } else if (dailySwipes >= 1) {
                    detailsText += `üëç <strong>Good:</strong> You have about one meal swipe per day.`;
                } else {
                    detailsText += `‚ö†Ô∏è <strong>Limited swipes:</strong> Use them strategically for your most expensive meals.`;
                }
            } else if (diningDollars > 0) {
                if (dailyDollars >= 20) {
                    detailsText += `üéâ <strong>Great!</strong> You have a comfortable daily dining dollar budget.`;
                } else if (dailyDollars >= 10) {
                    detailsText += `üëç <strong>Good:</strong> You have a reasonable daily budget for meals.`;
                } else {
                    detailsText += `üí° <strong>Budget carefully:</strong> Look for affordable options to stretch your dining dollars.`;
                }
            }
            
            document.getElementById('overall-details').innerHTML = detailsText;
            document.getElementById('result').style.display = 'block';
        }

        function hasValidInputs() {
            const diningDollars = parseFloat(document.getElementById('dining-dollars').value) || 0;
            const mealSwipes = parseInt(document.getElementById('meal-swipes').value) || 0;
            const endDate = new Date(document.getElementById('end-date').value);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            return (diningDollars > 0 || mealSwipes > 0) && endDate > today;
        }
        
        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }
        
        function clearErrors() {
            const errors = document.querySelectorAll('.error');
            errors.forEach(error => {
                error.style.display = 'none';
            });
        }
        
        const today = new Date();
        const todayString = today.toISOString().split('T')[0];
        document.getElementById('end-date').setAttribute('min', todayString);
    </script>
</body>
</html>